---
// Importa los componentes necesarios
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import ProjectCard from '../components/ProjectCard.astro';
import Footer from '../components/Footer.astro';
import About from '../components/About.astro';
import Certifications from '../components/Certifications.astro';
import Testimonials from '../components/Testimonials.astro';
import SocialLinks from '../components/SocialLinks.astro';
import ContactForm from '../components/ContactForm.astro';
import { getGitHubRepos } from '../components/api.astro';

// Secciones del portafolio
const certifications = [
  { title: 'Certificación 1', issuer: 'Instituto ABC' },
  { title: 'Certificación 2', issuer: 'Instituto XYZ' },
];

const testimonials = [
  { author: 'Nombre del testimonio', quote: 'Cita del testimonio' },
  { author: 'Nombre del testimonio', quote: 'Cita del testimonio' },
];

const links = [
  { name: 'GitHub', url: 'https://github.com/tu-usuario' },
  { name: 'LinkedIn', url: 'https://www.linkedin.com/in/tu-usuario' },
  { name: 'Twitter', url: 'https://twitter.com/tu-usuario' },
  { name: 'Instagram', url: 'https://www.instagram.com/tu-usuario' },
];

const apiResponse = await getGitHubRepos();
const projects = apiResponse.repos; // Los repositorios obtenidos
const apiMessage = apiResponse.success ? 'La API de GitHub funciona correctamente.' : 'La API de GitHub no funciona.';
---

<Layout>
  <Header />

  <main class="container mx-auto p-4">
    <About />
    
    <!-- Mostrar mensaje de estado de la API -->
    <h1 class="text-2xl font-bold text-center mb-4">{apiMessage}</h1>

    <!-- Sección de proyectos -->
    <section id="projects" class="my-8">
      <h2 class="text-2xl font-bold text-center mb-4">Mis Proyectos</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {projects.map((repo) => (
          <ProjectCard 
            key={repo.html_url} 
            title={repo.name} 
            description={repo.description} 
            image={repo.imageUrl || ''} // Si tienes imágenes, añádelas aquí
            link={repo.html_url} 
          />
        ))}
      </div>
    </section>

    <!-- Sección de habilidades -->
    <section id="skills" class="my-8 text-center">
      <h2 class="text-2xl font-bold mb-4">Mis Habilidades</h2>
      <ul class="list-disc list-inside inline-block text-left">
        <li>JavaScript</li>
        <li>React</li>
        <li>Node.js</li>
        <li>Tailwind CSS</li>
        <li>Astro</li>
      </ul>
    </section>

    <!-- Sección de certificaciones -->
    <Certifications certifications={certifications} />

    <!-- Sección de testimonios -->
    <Testimonials testimonials={testimonials} />

    <!-- Sección de enlaces a redes sociales -->
    <SocialLinks links={links} />

    <!-- Sección de contacto -->
    <ContactForm />
  </main>

  <Footer />
</Layout>
